<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Triangle Ink OBJ Viewer + Converter</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <aside class="panel">
      <h1>Triangle Ink OBJ Viewer</h1>

      <div class="block">
        <label class="btn">
          Load OBJ
          <input id="fileInput" type="file" accept=".obj,text/plain" />
        </label>

        <div id="dropzone" class="dropzone" tabindex="0">
          Drag and drop an OBJ here
          <div class="muted">or click this area and pick a file</div>
        </div>

        <div class="stats">
          <div><span class="k">Vertices:</span> <span id="statVerts">0</span></div>
          <div><span class="k">Triangles:</span> <span id="statTris">0</span></div>
          <div><span class="k">Colors:</span> <span id="statColors">Off</span></div>
        </div>
      </div>

      <div class="block">
        <label class="row">
          <span>Triangle limit</span>
          <input id="triLimit" type="number" min="50" max="50000" step="1" value="600" />
        </label>

        <label class="row check">
          <input id="toggleColors" type="checkbox" checked />
          <span>Enable colors</span>
        </label>

        <label class="row check">
          <input id="toggleCull" type="checkbox" checked />
          <span>Backface culling</span>
        </label>

        <label class="row check">
          <input id="toggleAuto" type="checkbox" checked />
          <span>Auto rotate</span>
        </label>

        <label class="row">
          <span>FOV</span>
          <input id="fov" type="number" min="20" max="140" step="1" value="75" />
        </label>
      </div>

      <div class="block">
        <div class="row">
          <button id="btnExport" class="btn2">Export OBJ ([[v/f]])</button>
          <button id="btnCopy" class="btn2">Copy OBJ</button>
          <button id="btnDownload" class="btn2">Download OBJ</button>
        </div>
        <textarea id="exportOut" spellcheck="false" placeholder="OBJ export will appear here"></textarea>
        <div class="muted small">
          Export format uses 1-based indices. Faces are triangles only.
        </div>
      </div>

      <div class="block">
        <div class="row">
          <span class="muted">Scene inserter (colors)</span>
        </div>

        <label class="row">
          <span>MeshID</span>
          <input id="meshId" type="number" min="1" max="999" step="1" value="7" />
        </label>

        <label class="row check">
          <input id="insBackcull" type="checkbox" checked />
          <span>Backcull</span>
        </label>

        <div class="row">
          <button id="btnExportIns" class="btn2">Build inserter</button>
          <button id="btnCopyIns" class="btn2">Copy inserter</button>
          <button id="btnDownloadIns" class="btn2">Download inserter</button>
        </div>

        <textarea id="exportIns" spellcheck="false" placeholder="Inserter output will appear here"></textarea>
        <div class="muted small">Outputs Lua with a single-line color array.</div>
      </div>

      <div class="block small">
        <div class="muted">
          Controls:
          <ul>
            <li>Drag mouse: rotate model</li>
            <li>Wheel: zoom</li>
            <li>WASD or arrows: move camera</li>
            <li>Q/E: up/down</li>
            <li>R: reset view</li>
          </ul>
        </div>
      </div>
    </aside>

    <main class="view">
      <canvas id="canvas"></canvas>
      <div class="overlay" id="overlay"></div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
